<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Welcome to the most extraordinary finance web application!">
    <meta name="keywords" content="CVS investment web application">
    <link rel="stylesheet" href="../static/css/style_buy.css">
    <link rel="stylesheet" href="../static/css/style_inv.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <title>Analysis</title>
    
    <!-- JQuery links  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!--Added -->
    <link rel="stylesheet" type="text/css" href="https://code.highcharts.com/css/stocktools/gui.css">
    <link rel="stylesheet" type="text/css" href="https://code.highcharts.com/css/annotations/popup.css">

    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/modules/data.js"></script>

    <script src="https://code.highcharts.com/stock/indicators/indicators-all.js"></script>

    <script src="https://code.highcharts.com/stock/modules/drag-panes.js"></script>
    <script src="https://code.highcharts.com/stock/modules/annotations-advanced.js"></script>
    <script src="https://code.highcharts.com/stock/modules/price-indicator.js"></script>
    <script src="https://code.highcharts.com/stock/modules/full-screen.js"></script>

    <script src="https://code.highcharts.com/stock/modules/stock-tools.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

</head>
<body>
    <header>
        <nav id="navbar">
            <div class="container0">
                <img src="../static/img/web_logo.png" alt="logo" class="c-logo">
                <h1 class="logo"><a href="index">CVS</a></h1>
                <ul>
                    <li><a href="index">Home</a></li>
                    <li><a class="current" href="inv">Analysis</a></li>
                    <li><a href="trade">Trade</a></li>
                    <li><a href="about">About</a></li>
                    <li><a href="contact">Contact</a></li>
                    <li><a href="http://localhost:8000/" class="f90-logout-button">Sign Out</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <section id="flip-box">
        <h1 class="py-4">Stock Analysis</h1>

        <div class="wrapper">
            <div class="cntain">
                <div id="container2" class="chart"></div>
            </div>

            <form class="form-style" method="post">
            <div class="secondary">
                <div class="inputGroup">
                  <input id="radio1" name="radio" value="AAPL" type="radio" checked/>
                  <label for="radio1">Apple</label>
                </div>
                <div class="inputGroup">
                    <input id="radio2" name="radio" value="AMZN" type="radio"/>
                    <label for="radio2">Amazon</label>
                </div>
                <div class="inputGroup">
                    <input id="radio3" name="radio" value="Bitcoin" type="radio"/>
                    <label for="radio3">Bitcoin</label>
                </div>
                <div class="inputGroup">
                    <input id="radio4" name="radio" value="COFORGE" type="radio"/>
                    <label for="radio4">Coforge</label>
                </div>
                <div class="inputGroup">
                    <input id="radio5" name="radio" value="FB" type="radio"/>
                    <label for="radio5">Facebook</label>
                </div>
                <div class="inputGroup">
                    <input id="radio6" name="radio" value="GODREJ" type="radio"/>
                    <label for="radio6">Godrej</label>
                </div>
                <div class="inputGroup">
                    <input id="radio7" name="radio" value="GOOGL" type="radio"/>
                    <label for="radio7">Google</label>
                </div>
                <div class="inputGroup">
                    <input id="radio8" name="radio" value="HDFC" type="radio"/>
                    <label for="radio8">HDFC</label>
                </div>
                <div class="inputGroup">
                    <input id="radio9" name="radio" value="ICICI" type="radio"/>
                    <label for="radio9">ICICI</label>
                </div>
                <div class="inputGroup">
                    <input id="radio10" name="radio" value="Infosys" type="radio"/>
                    <label for="radio10">Infosys</label>
                </div>
                <div class="inputGroup">
                    <input id="radio11" name="radio" value="ITC" type="radio"/>
                    <label for="radio11">ITC</label>
                </div>
                <div class="inputGroup">
                    <input id="radio12" name="radio" value="Johnson&Johnson" type="radio"/>
                    <label for="radio12">Johnson & Johnson</label>
                </div>
                <div class="inputGroup">
                    <input id="radio13" name="radio" value="JPMorgan" type="radio"/>
                    <label for="radio13">JP Morgan</label>
                </div>
                <div class="inputGroup">
                    <input id="radio14" name="radio" value="MSFT" type="radio"/>
                    <label for="radio14">Microsoft</label>
                </div>
                <div class="inputGroup">
                    <input id="radio15" name="radio" value="NVDA" type="radio"/>
                    <label for="radio15">Nvidia</label>
                </div>
                <div class="inputGroup">
                    <input id="radio16" name="radio" value="SBI" type="radio"/>
                    <label for="radio16">SBI</label>
                </div>
                <div class="inputGroup">
                    <input id="radio17" name="radio" value="TCS" type="radio"/>
                    <label for="radio17">TCS</label>
                </div>
                <div class="inputGroup">
                    <input id="radio18" name="radio" value="TSLA" type="radio"/>
                    <label for="radio18">Tesla</label>
                </div>
                <div class="inputGroup">
                    <input id="radio19" name="radio" value="Visa" type="radio"/>
                    <label for="radio19">Visa</label>
                </div>
                <div class="inputGroup">
                    <input id="radio20" name="radio" value="WMT" type="radio"/>
                    <label for="radio20">Walmart</label>
                </div>
            </div>
            <button type="submit" class="btn" onsubmit="redo();">View</button>
            </form>
                 
        </div>

    </section>

    <script>
        var chartdata = []
        var volume = []

        function processData(data)
        {
            var data = data.res;
            for (var i=0; i < data.length; i++)
            {
                chartdata.push([
                    data[i][0], // the date
                    data[i][1], // open
                    data[i][2], // high
                    data[i][3], // low
                    data[i][4] // close
                ]);
                volume.push([
                    data[i][0], // the date
                    data[i][5] // the volume
                ]);
            }
        }

      
        function plotCharts(){
            Highcharts.stockChart('container2', {
                chart: {
                    backgroundColor: '#333',
                    borderRadius: 30,
                    width: 800,
                    styleMode: true
                },
                rangeSelector:{
                    selected: 1,
                    color: '#777'
                },
                navigation: {
                    bindings: {
                        rect: {
                            annotationsOptions: {
                                shapeOptions: {
                                    fill: 'rgba(0, 255, 255, 0.8)'
                                }
                            }
                        }
                    },
                    annotationsOptions: {
                        typeOptions: {
                            line: {
                                stroke: 'rgba(0, 255, 255, 1)',
                                strokeWidth: 1
                            }
                        }
                    }
                },
                yAxis: [{
                    labels: {
                        align: 'left'
                    },
                    height: '80%'
                }, {
                    labels: {
                        align: 'left'
                    },
                    top: '80%',
                    height: '20%',
                    offset: 0
                }],
                tooltip: {
                    backgroundColor: {
                        linearGradient: [0, 0, 0, 70],
                        stops: [
                            [0, '#3366AA'],
                            [1, '#ff3399']
                        ]
                    },
                    color: '#fff',
                    borderWidth: 1,
                    borderRadius: 20
                },
                series: [{
                    type: 'areaspline',
                    id: 'aapl-ohlc',
                    threshold: null,
                    fillColor: {
                        linearGradient: {
                            x1: 0,
                            y1: 0,
                            x2: 0,
                            y2: 1
                        },
                        stops: [
                            [0, Highcharts.getOptions().colors[0]],
                            [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                        ]
                    },
                    name: 'AAPL Stock Price',
                    data: chartdata
                }, {
                    type: 'column',
                    id: 'aapl-volume',
                    name: 'AAPL Volume',
                    data: volume,
                    yAxis: 1
                }]
            });
    
    
        }

        function redo(){
            $( document ).ready(function()
            {
                $.getJSON("/pipe", function(data){
                    processData(data);
                    plotCharts();
                });
            });
        }
        redo();
    
    </script>        
    

    <!-- <div class="clr"></div> -->
    <footer id="main-footer">
        <p>Code"vid"19 Solutions &copy; 2021, All Rights Reserved</p>
    </footer>
</body>
</html>


<!-- The code commented below is the sample code for each Card! Make your iterations here!.... delete remaining cards! -->

<!-- <div class="col" ontouchstart="this.classList.toggle('hover');">
    <div class="container1">
        <div class="front" style="background-image: url(https://unsplash.it/500/500/)">
            <div class="inner">
                <p>Axis</p>
                <span>Long Term Equity Direct - Growth</span>
            </div>
        </div>
        <div class="back">
            <div class="inner">
            <p>Sold on 05/03/2021</p>
            </div>
        </div>
    </div>
</div> -->